<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.ruoyi.web.mapper.TopUserMapper">

    <select id="selectByWalletAddress" resultType="com.ruoyi.web.entity.TopUserEntity">
        select *
        from top_user
        where wallet = #{walletAddress}
    </select>

    <select id="selectUserVOList" resultType="com.ruoyi.web.vo.UserProcessVO">
        select
            tu.*
        from top_user tu
        order by tu.id
    </select>

    <select id="selectInviteListById" resultType="com.ruoyi.web.vo.InviteVO">
        select tu.grade,
               tu.wallet,
               tu.create_time,
               0 as power
        from top_user tu inner join top_user_invite ti on tu.id = ti.invite_user_id
        where ti.user_id = #{id}
        order by tu.id
    </select>

    <select id="selectInviteInfo" resultType="com.ruoyi.web.vo.InviteInfoVO">
        select
            tu.grade,
            tu.invited_code,
            (select _tu.wallet from top_user _tu where _tu.id = tu.invited_user_id) as invitedUserWallet,
            0 as totalAmount,
            0 as totalInviteUser
        from top_user tu
        where tu.wallet = #{walletAddress}
    </select>

    <select id="selectParent" resultType="com.ruoyi.web.entity.TopUserEntity">
        select
            tu.*
        from top_user tu
        where tu.id = #{parentId}
    </select>

</mapper>